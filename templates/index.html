<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoRL Framework - Dashboard AvanÃ§ado</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¤– Auto Reinforcement Learning Framework</h1>
            <p>Dashboard AvanÃ§ado para Experimentos de AutoRL com OtimizaÃ§Ã£o Evolutiva de HiperparÃ¢metros</p>
        </header>

        <main>
            <!-- SeÃ§Ã£o 1: Upload de Dados -->
            <section class="card">
                <h2>ğŸ“Š Gerenciamento de Dados de Entrada</h2>
                <div class="data-options">
                    <label>
                        <input type="radio" name="data_source" value="sample" checked>
                        Usar dados de exemplo (Campanhas de Marketing)
                    </label>
                    <label>
                        <input type="radio" name="data_source" value="upload">
                        Fazer upload de arquivos CSV customizados
                    </label>
                </div>

                <div id="upload-section" style="display: none;">
                    <div class="upload-area">
                        <div class="upload-group">
                            <label for="control-file">ğŸ“ˆ Grupo de Controle (CSV):</label>
                            <input type="file" id="control-file" accept=".csv">
                        </div>
                        <div class="upload-group">
                            <label for="test-file">ğŸ§ª Grupo de Teste (CSV):</label>
                            <input type="file" id="test-file" accept=".csv">
                        </div>
                        <button onclick="uploadFiles()" class="btn btn-primary">ğŸ“¤ Upload Arquivos</button>
                    </div>
                </div>

                <div id="data-preview" class="data-preview">
                    <h3>ğŸ“‹ PrÃ©via dos Dados de Entrada</h3>
                    <div class="preview-tables">
                        <div class="preview-table">
                            <h4>ğŸ“Š Grupo de Controle</h4>
                            <div id="control-preview"></div>
                        </div>
                        <div class="preview-table">
                            <h4>ğŸ§ª Grupo de Teste</h4>
                            <div id="test-preview"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SeÃ§Ã£o 2: ConfiguraÃ§Ã£o do Experimento -->
            <section class="card">
                <h2>âš™ï¸ ConfiguraÃ§Ã£o do Experimento de AutoRL</h2>
                <div class="config-grid">
                    <div class="config-group">
                        <label for="algorithm">ğŸ¯ Algoritmo de Reinforcement Learning:</label>
                        <select id="algorithm">
                            <option value="epsilon_greedy">Epsilon-Greedy (ExploraÃ§Ã£o vs ExploraÃ§Ã£o)</option>
                            <option value="ucb">UCB1 (Upper Confidence Bound)</option>
                            <option value="thompson">Thompson Sampling (Bayesiano)</option>
                            <option value="ab_test">A/B Test Agent (ClÃ¡ssico)</option>
                        </select>
                    </div>

                    <div class="config-group">
                        <label for="optimizer">ğŸ§¬ Otimizador Evolutivo:</label>
                        <select id="optimizer">
                            <option value="genetic">Algoritmo GenÃ©tico (SeleÃ§Ã£o Natural)</option>
                            <option value="pso">PSO (Particle Swarm Optimization)</option>
                            <option value="differential_evolution">EvoluÃ§Ã£o Diferencial</option>
                            <option value="grid_search">Grid Search</option>
                            <option value="random_search">Random Search</option>
                            <option value="bayesian_optimization">Bayesian Optimization</option>
                        </select>
                    </div>

                    <div class="config-group">
                        <label for="generations">ğŸ”„ GeraÃ§Ãµes de OtimizaÃ§Ã£o:</label>
                        <input type="range" id="generations" min="5" max="100" value="20">
                        <span id="generations-value">20</span>
                    </div>

                    <div class="config-group">
                        <label for="iterations">ğŸ”„ ExecuÃ§Ãµes por CombinaÃ§Ã£o:</label>
                        <input type="range" id="iterations" min="1" max="10" value="3">
                        <span id="iterations-value">3</span>
                    </div>
                </div>
            </section>

            <!-- SeÃ§Ã£o 3: ExecuÃ§Ã£o -->
            <section class="card">
                <h2>ğŸš€ ExecuÃ§Ã£o do Experimento de AutoRL</h2>
                <button onclick="runExperiment()" class="btn btn-success btn-large">
                    ğŸš€ Executar Experimento de AutoRL
                </button>
                
                <div id="progress-section" style="display: none;">
                    <div class="progress-bar">
                        <div id="progress-fill"></div>
                    </div>
                    <p id="progress-text">ğŸ”„ Preparando experimento...</p>
                </div>
            </section>

            <!-- SeÃ§Ã£o 4: ConfiguraÃ§Ã£o do Experimento -->
            <section class="card" id="experiment-config-section" style="display: none;">
                <h2>ğŸ“‹ ConfiguraÃ§Ã£o do Experimento Executado</h2>
                <div class="config-summary">
                    <div class="config-item">
                        <strong>ğŸ¯ Algoritmo RL:</strong> <span id="exp-algorithm">-</span>
                    </div>
                    <div class="config-item">
                        <strong>ğŸ§¬ Otimizador:</strong> <span id="exp-optimizer">-</span>
                    </div>
                    <div class="config-item">
                        <strong>ğŸ”„ GeraÃ§Ãµes:</strong> <span id="exp-generations">-</span>
                    </div>
                    <div class="config-item">
                        <strong>ğŸ”„ IteraÃ§Ãµes:</strong> <span id="exp-iterations">-</span>
                    </div>
                    <div class="config-item">
                        <strong>ğŸ“Š Fonte de Dados:</strong> <span id="exp-data-source">-</span>
                    </div>
                    <div class="config-item">
                        <strong>ğŸ¯ MÃ©trica de Recompensa:</strong> <span id="exp-reward-metric">-</span>
                    </div>
                    <div class="config-item">
                        <strong>ğŸ¯ Objetivo de OtimizaÃ§Ã£o:</strong> <span id="exp-optimization-goal">-</span>
                    </div>
                </div>
            </section>

            <!-- SeÃ§Ã£o 5: EstatÃ­sticas dos Dados -->
            <section class="card" id="data-stats-section" style="display: none;">
                <h2>ğŸ“Š EstatÃ­sticas dos Dados de Entrada</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>ğŸ“ˆ Campanhas</h3>
                        <p id="total-campaigns">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>ğŸ“… Dias de Dados</h3>
                        <p id="total-days">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>ğŸ’° Gasto Total</h3>
                        <p id="total-spend">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>ğŸ›’ Compras MÃ©dias</h3>
                        <p id="avg-purchases">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>ğŸ“ˆ ROI MÃ©dio</h3>
                        <p id="avg-roi">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>ğŸ¯ Taxa de ConversÃ£o</h3>
                        <p id="conversion-rate">-</p>
                    </div>
                </div>
            </section>

            <!-- SeÃ§Ã£o 6: MÃ©tricas de Treinamento -->
            <section class="card" id="training-metrics-section" style="display: none;">
                <h2>ğŸ“ˆ MÃ©tricas de Treinamento e OtimizaÃ§Ã£o</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>ğŸ”„ ExecuÃ§Ãµes</h3>
                        <p><strong>Total:</strong> <span id="total-iterations">-</span></p>
                        <p><strong>Bem-sucedidas:</strong> <span id="successful-runs">-</span></p>
                        <p><strong>Falharam:</strong> <span id="failed-runs">-</span></p>
                    </div>
                    <div class="metric-card">
                        <h3>ğŸ“Š ConvergÃªncia</h3>
                        <p><strong>Taxa de ConvergÃªncia:</strong> <span id="convergence-rate">-</span></p>
                        <p><strong>Desvio PadrÃ£o Recompensa:</strong> <span id="std-reward">-</span></p>
                        <p><strong>Desvio PadrÃ£o Regret:</strong> <span id="std-regret">-</span></p>
                    </div>
                    <div class="metric-card">
                        <h3>ğŸ“ˆ Melhorias</h3>
                        <p><strong>Melhoria na Recompensa:</strong> <span id="reward-improvement">-</span></p>
                        <p><strong>ReduÃ§Ã£o no Regret:</strong> <span id="regret-reduction">-</span></p>
                    </div>
                </div>
            </section>

            <!-- SeÃ§Ã£o 7: HiperparÃ¢metros Otimizados -->
            <section class="card" id="optimized-params-section" style="display: none;">
                <h2>ğŸ”§ HiperparÃ¢metros Otimizados</h2>
                <div class="params-container">
                    <div class="params-card">
                        <h3>ğŸ¯ Melhores ParÃ¢metros Encontrados</h3>
                        <div id="optimized-parameters"></div>
                    </div>
                    <div class="params-card">
                        <h3>ğŸ† Melhor ExecuÃ§Ã£o</h3>
                        <div id="best-run-details"></div>
                    </div>
                    <div class="params-card">
                        <h3>âš ï¸ Pior ExecuÃ§Ã£o</h3>
                        <div id="worst-run-details"></div>
                    </div>
                </div>
            </section>

            <!-- SeÃ§Ã£o 8: Resultados e VisualizaÃ§Ã£o -->
            <section class="card">
                <h2>ğŸ“Š Resultados e VisualizaÃ§Ã£o dos Experimentos</h2>
                <div id="results-section" style="display: none;">
                    <div class="results-summary">
                        <div class="summary-card">
                            <h3>ğŸ”„ Total de ExecuÃ§Ãµes</h3>
                            <p id="total-runs">-</p>
                        </div>
                        <div class="summary-card">
                            <h3>ğŸ“ˆ Recompensa MÃ©dia</h3>
                            <p id="avg-reward">-</p>
                        </div>
                        <div class="summary-card">
                            <h3>ğŸ† Melhor Recompensa</h3>
                            <p id="best-reward">-</p>
                        </div>
                        <div class="summary-card">
                            <h3>âš ï¸ Pior Recompensa</h3>
                            <p id="worst-reward">-</p>
                        </div>
                        <div class="summary-card">
                            <h3>ğŸ˜” Arrependimento MÃ©dio</h3>
                            <p id="avg-regret">-</p>
                        </div>
                        <div class="summary-card">
                            <h3>ğŸ¯ Melhor Arrependimento</h3>
                            <p id="best-regret">-</p>
                        </div>
                    </div>

                    <div class="charts-container">
                        <div class="chart-wrapper">
                            <h3>ğŸ“ˆ EvoluÃ§Ã£o das Recompensas por IteraÃ§Ã£o</h3>
                            <canvas id="reward-chart"></canvas>
                        </div>
                        <div class="chart-wrapper">
                            <h3>ğŸ˜” EvoluÃ§Ã£o do Arrependimento por IteraÃ§Ã£o</h3>
                            <canvas id="regret-chart"></canvas>
                        </div>
                        <div class="chart-wrapper">
                            <h3>ğŸ¯ DistribuiÃ§Ã£o de Recompensas</h3>
                            <canvas id="reward-distribution-chart"></canvas>
                        </div>
                        <div class="chart-wrapper">
                            <h3>ğŸ“Š ComparaÃ§Ã£o: Recompensa vs Arrependimento</h3>
                            <canvas id="reward-vs-regret-chart"></canvas>
                        </div>
                    </div>

                    <div class="results-table">
                        <h3>ğŸ“‹ Tabela Detalhada de Resultados</h3>
                        <div id="results-table"></div>
                    </div>

                    <div class="actions">
                        <button onclick="downloadResults()" class="btn btn-secondary">
                            ğŸ“¥ Download CSV dos Resultados
                        </button>
                        <button onclick="downloadReport()" class="btn btn-primary">
                            ğŸ“„ Gerar RelatÃ³rio Completo
                        </button>
                    </div>
                </div>

                <div id="no-results">
                    <p>ğŸš€ Execute um experimento para ver os resultados detalhados.</p>
                </div>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html> 